" ----------------------------------------------------------------------------
" IDEAVIMRC Configuration
" ----------------------------------------------------------------------------
" Sourced by the IdeaVim plugin in JetBrains IDEs.
" Place this file in your home directory (e.g., ~/.ideavimrc).

" ----------------------------------------------------------------------------
" Basic Settings
" ----------------------------------------------------------------------------
set number                  " Show line numbers
set cursorline              " Highlight the current line
set scrolloff=10              " Keep 10 lines of context around the cursor

" ----------------------------------------------------------------------------
" Behavior
" ----------------------------------------------------------------------------
set clipboard=unnamedplus   " Use the system clipboard
set ignorecase              " Ignore case when searching
set smartcase               " Make search case-sensitive if it contains uppercase letters
set timeoutlen=300            " Faster timeout for key sequences

" ----------------------------------------------------------------------------
" IdeaVim Specific Settings
" ----------------------------------------------------------------------------

" Use JetBrains keymap for actions not handled by IdeaVim
set ideajoin

" Allow using IDE-specific shortcuts (e.g., Ctrl+C, Ctrl+V)
" For example, you can use standard copy/paste in insert mode
set idearefactormode=select

" ----------------------------------------------------------------------------
" Key Mappings
" ----------------------------------------------------------------------------

" Set the leader key to Space
let mapleader = " "

" Quick escape from insert mode
inoremap jk <Esc>
inoremap kj <Esc>

" Clear search highlight with <Esc>
nnoremap <Esc> :nohlsearch<CR>

" Window navigation with Ctrl + hjkl
" This is the default in many JetBrains setups, but we ensure it's here
nnoremap <C-h> <C-w>h
nnoremap <C-j> <C-w>j
nnoremap <C-k> <C-w>k
nnoremap <C-l> <C-w>l

" ----------------------------------------------------------------------------
" IDE Action Mappings
" ----------------------------------------------------------------------------
" Map keys to JetBrains actions.
" Find action IDs using `:actionlist` in the IDE.

" File Finder (Search Everywhere)
nnoremap <leader>ff :action SearchEverywhere<CR>

" Project Search (Find in Files)
nnoremap <leader>fg :action FindInPath<CR>

" Go to Definition
nnoremap gd :action GotoDeclaration<CR>

" Find Usages
nnoremap gr :action FindUsages<CR>

" Format Code
nnoremap <leader>fm :action ReformatCode<CR>

" Toggle Comments
nnoremap <leader>/ :action CommentByLineComment<CR>
vmap <leader>/ :action CommentByLineComment<CR>

" Save and Close
nnoremap <leader>w :action SaveAll<CR>
nnoremap <leader>q :action CloseActiveEditor<CR>

" Splits - map to IDE split actions
nnoremap <leader>sv :action VSplit<CR>
nnoremap <leader>sh :action SplitHorizontally<CR>

" Tab navigation
nnoremap <S-L> :action NextTab<CR>
nnoremap <S-H> :action PreviousTab<CR>

" Rename
nnoremap <leader>rn :action RenameElement<CR>
